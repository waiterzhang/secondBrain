# 落单数据

1、落单的track数据  
​![image](image-20240926143504-mgijh7p.png)​

* track的数据设置入口在`MainOrderRequestAdaptor`​-`mainOrderRequest.setSaveOrderExtendInfo(buildSaveOrderExtendInfo(param, promotionInfo));`​
* track的数据主要是记录来自booking的很多信息，一部分是在此处手动塞进去的。还有一部分是来自于全流程中需要track的数据：`track.putAll(orderReq.getOrderInfo().getTrackData());`​  
  ​`getOrderInfo`​里面的trackData来自于`submitContext.getExtraParams()`​里面的`trackData`​。进订、下单需要track落单的数据，都会不断的往这个map里面添加。  
  进订的时候有专门的ExtraProcessItem来处理track数据。
* 进订extraParam（除了track）里面存下单需要，但是不需要落单的。track里面存要落单的。track数据基本是一些标记性质的内容。如果还有别的数据需要落单，但是不适合放在track数据里面，可能需要交易升级jar了。
* 整个报价的数据快照都会落单，包括查询报价的query数据。所以说，交易如果想拿booking给交易的版控，其实也是能在query里面拿到的。

2、其他数据如：

* 查到的促销的数据：` mainOrderRequest.setPromotionInfo(promotionInfo);`​​  
  ​![image](image-20240926160426-imfvc3e.png)​
* 查到的报价的数据：`mainOrderRequest.setOrderProduct(param.getqOrderProduct());`​​  
  ​![image](image-20240926160334-pv8gevs.png)  
  报价里面也有track数据，但是我们一般不会往里面写：  
  ​![image](image-20240926160637-140trld.png)​
* 促销的包装  
  ​![image](image-20240926160520-3soekig.png)​
* 进订的快照：  
  ​![image](image-20240926160544-g734lsl.png)​
