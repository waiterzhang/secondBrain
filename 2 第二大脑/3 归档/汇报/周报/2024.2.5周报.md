# 2024.2.5周报

* 支持压测
* B页拼团浮层优化

  * S：本需求中涉及Booking的全局异常处理以及前端针对异常情况的处理流程；
  * C：在分期试算接口进行调用时，如果发生异常则会进入全局异常处理流程，全局异常处理流程比较繁琐，细节很多；其次，当异常发生时，前端收到的是什么结构的数据以及如何处理都不是很清楚。
  * Q：Booking全局异常处理的流程是什么？当出现异常时，前端如何应对？
  * A：

    * 通过继承SimpleMappingExceptionResolver，当程序中抛出异常中会调用其resolveException来实现自定义异常处理逻辑；
    * Booking先通过判断异常类型预先提取code以及errSys（错误信息），如果没有对应的特殊处理则会走到兜底的code和errsys；
    * Booking根据code来获取自定义异常提示信息（主要用于提示用户prompt）,如果自定义异常提示中未匹配，则走兜底逻辑；
    * Booking会将错误提示信息包裹为协议结构进行返回。
    * 前端收到结果后，首先判断状态码（bstatus.code）是否正常（0）；如果为0则是正常的业务流程，如果非0，则走前端的判断逻辑。（针对本次需求，非0后会隐藏拿去花，同时根据拿去花的勾选状态提示/不提示兜底文案）；

    在本次学习中，对于bo'oking的全局异常处理有了大概的了解，但是还有很多细节被遗漏。还需要进一步的整理，预计节后回来一周内整理完毕。

‍

‍
